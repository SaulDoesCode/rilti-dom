{const a=Object.defineProperty,b=Object.getOwnPropertyDescriptor,c=window,d=document,e=void 0,f=(a,b=a.length,...c)=>b<=c.length?a(...c):f.bind(e,a,b,...c),g=Array.isArray,h=(...a)=>(...b)=>a.some((a)=>a(...b)),i=(a)=>a&&a.constructor===Object,j=(a)=>a instanceof Function,k=(a)=>a instanceof Boolean,l=(a)=>'string'==typeof a,m=(a)=>'number'==typeof a,n=(a)=>a===e||a===null,o=h(l,k,m),p=(a)=>a&&(g(a)||!j(a)&&0==a.length%1),q=(a)=>a&&a.nodeType,r=h(q,p,o),s=(c={},d,e=!1,f=Object.keys(d))=>(f.forEach((f)=>{e&&(!e||f in c)||a(c,f,b(d,f))}),c),t=(a,...b)=>setTimeout(a,0,...b),u=(a,b)=>{if(!n(a))if(i(a))for(const c in a)b(a[c],c,a);else if(a.forEach)a.forEach(b);else{let c=0;if(a.length)for(;c!==a.length;)b(a[c],c++,a);else if(0==a%1)for(;c!==a;)b(c++,a)}return a},v=(a,b=[])=>g(a)?(u(a,(a)=>{g(a)?v(a,b):b.push(a)}),b):[a],w=(a,b=d)=>q(a)?a:w(b).querySelector(a),x=(a,b=d)=>b===a||!!(16&b.compareDocumentPosition(a)),y=f((a,b,c,d,f=!1)=>{if(l(b)&&(b=w(b)),i(c))return u(c,(d,e)=>{c[e]=y(a,b,e,d,f)});if(!j(d))return y.bind(e,a,b,c);d=d.bind(b);const g=(c)=>{d(c,b),a&&h()},h=()=>(b.removeEventListener(c,g),m),k=(d)=>(a=!!d,b.addEventListener(c,g,f),m),m={handler:g,type:c,on:k,off:h,once:k.bind(e,!0)};return k(a)},3),z={get:(a,b)=>(c,d,e)=>a(c,b,d,e)},A=new Proxy(y(!0),z),B=new Proxy(y(!1),z),C=(a)=>{'complete'===d.readyState||d.body?t(a):c.addEventListener('DOMContentLoaded',a)},D=(a)=>j(a)?D(a()):q(a)?a:g(a)?G(a):d.createRange().createContextualFragment(a),E=(a)=>n(a)?d.createDocumentFragment():D(a),F=(a,b,c)=>{a.dispatchEvent(new CustomEvent(b,{detail:c}))},G=(a,b=E())=>(v(a).forEach((a)=>{b.appendChild(a=D(a)),M(a)}),b),H={css:f((a,b,c)=>(i(b)?u(b,(b,c)=>H.css(a,c,b)):l(b)&&('--'===b.slice(0,2)?a.style.setProperty(b,c):a.style[b]=c),a),2),Class:f((a,b,c=!a.classList.contains(b))=>{const d=(b)=>k(c)?c:!a.classList.contains(b);return i(b)?u(b,(b,c)=>{H.Class(a,c,d(b))}):(l(b)&&(b=b.split(' ')),g(b)&&u(b,(b)=>{a.classList[d(c)?'add':'remove'](b)})),a},2),hasClass:f((a,b)=>a.classList.contains(b)),attr:f((b,a,c)=>{if(i(a))u(a,(c,d)=>{b[n(c)?'removeAttribute':'setAttribute'](d,c)});else if(l(a)){if(!o(c))return b.getAttribute(a);b.setAttribute(a,c)}return b},2),rmAttr(a,...b){return b.forEach((b)=>a.removeAttribute(b)),a},emit:F,append:f((a,...b)=>(b=G(b),R(a).then((a)=>a.appendChild(b)),a),2),prepend:f((a,...b)=>(b=G(b),R(a).then((a)=>a.prepend(b)),a),2),remove(a,b){return m(b)?setTimeout(()=>H.remove(a),b):x(a)&&a.remove(),a},mutate:(a,b,c=!0)=>u(b,(d,e)=>{if(g(d)||(d=[d]),e in H){const c=H[e](a,...d);c!==a&&(b[e]=c)}else if('class'===e||'className'===e)H.Class(a,...d);else if('children'===e||'inner'===e)a.innerHTML='',r(d)&&H.append(a,d);else if('text'===e)a.textContent=d;else if('html'===e)a.innerHTML=d;else{let f=e.substr(0,4);const g='once'===f;g||(f=e.substr(0,2));const h='on'===f;if(g||h){let c=e.substr(g?4:2);const h=y(g);b[f]||(b[f]={}),b[f][c]=c.length?h(a,c,...d):h(a,...d)}else(c||e in a)&&(j(a[e])?a[e](...d):a[e]=d)}})},I=(a)=>(b,c)=>a[k(c)?c?'add':'delete':'has'](b),J=I(new WeakSet),K=I(new WeakSet),L=(a)=>{J(a)||F(a,'create')},M=(a)=>{K(a)||(K(a,!0),F(a,'mount'))},N=(a)=>{K(a,!1),F(a,'destroy')},O='appendChild',P=(a,b='body',c=O)=>(R(b).then((b)=>{x(b)||c===O?(!q(a)&&(a=G(a)),b[c](a),M(a)):A.mount(b,()=>{q(a)||(a=G(a)),b[c](a),M(a)})},(a)=>console.error('render fault:',a)),a),Q=(c,e,...f)=>{const g=q(c)?c:'svg'===c?d.createElementNS('http://www.w3.org/2000/svg',c):d.createElement(c);if(r(e)&&f.unshift(e),f.length&&'#text'!==g.nodeName&&H.append(g,f),i(e)){H.mutate(g,e,!1);const{props:c,methods:d,cycle:f}=e;if(u(c,(d,e)=>{e in g?g[e]=d:'accessors'===e?u(d,(b,c)=>{const{set:d=b,get:e=b}=b;a(g,c,{set:d.bind(g,g),get:e.bind(g,g)})}):a(g,e,b(c,e))}),u(d,(b,c)=>{a(g,c,{value:b.bind(g,g)})}),f){const{mount:a,destroy:b,create:c}=f;if(A.create(g,()=>{J(g,!0),c&&c.call(g,g)}),a)var h=A.mount(g,a.bind(g,g));(a||b)&&B.destroy(g,()=>{b&&b.call(g,g),h&&h.on()})}e.render&&P(g,e.render)}return L(g),g},R=new Proxy(s((a,b=d)=>new Promise((c,e)=>{q(a)?c(a):'head'===a?c(d.head):l(a)?C(()=>{const f='body'===a?d.body:w(a,b);q(f)?c(f):e(new Error([400,a]))}):e(new Error([400,a]))}),{query:w,html:D,text:(a,b)=>(l(a)&&([b,a]=[a,{}]),Q(new Text(b),a)),frag:E}),{get:(a,b)=>Reflect.get(a,b)||Q.bind(e,b),set(a,b,c){a[b]=c}}),S=(a)=>u(a,(a,b)=>{'#'!==b[0]&&(b='#'+b),S.routes[b]=a,S.activate(b)});S.routes={},S.activate=(a)=>{if(a===location.hash&&a in S.routes){const b=S.routes[a];j(b.active)&&b.active(b,a),H.mutate(b.host,{inner:b.view})}},S.del=(a)=>delete S.routes[a],B.hashchange(c,()=>S.activate(location.hash)),new MutationObserver((a)=>a.forEach(({addedNodes:a,removedNodes:b})=>{a.length&&a.forEach((a)=>M(a)),b.length&&b.forEach((a)=>N(a))})).observe(d,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0}),c.rilti={curry:f,dom:R,domfn:H,each:u,extend:s,flatten:v,on:B,once:A,render:P,router:S,run:C,runAsync:t,isMounted:x,isDef:(a)=>!n(a),isNil:n,isPrimitive:o,isFunc:j,isStr:l,isBool:k,isNum:m,isRenderable:r,isObj:i,isArr:g,isArrlike:p,isEl:(a)=>a&&a instanceof Element,isNode:q,isInput:(a)=>a&&(a instanceof HTMLInputElement||a instanceof HTMLTextAreaElement)}}